<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>L·ªãch s·ª≠ ƒë∆°n h√†ng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h2 class="mb-4">üïì L·ªãch s·ª≠ ƒë∆°n h√†ng</h2>
    <a href="/customer/home" class="btn btn-secondary mb-3">‚Üê Quay l·∫°i trang ch√≠nh</a>

    <div th:if="${invoices != null and !invoices.isEmpty()}">
        <div th:each="invoice : ${invoices}" class="card mb-4 shadow-sm">
            <div class="card-header bg-primary text-white">
                <strong>M√£ ƒë∆°n: </strong><span th:text="${invoice.invoiceId}"></span>
                <span class="float-end"><strong>Ng√†y:</strong> <span th:text="${#temporals.format(invoice.createdAt, 'dd/MM/yyyy HH:mm')}"></span></span>
            </div>
            <div class="card-body">
                <table class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>S·∫£n ph·∫©m</th>
                            <th>S·ªë l∆∞·ª£ng</th>
                            <th>Gi√°</th>
                            <th>Th√†nh ti·ªÅn</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="item : ${invoice.items}">
                            <td th:text="${item.product.productId}">SP001</td>
                            <td th:text="${item.quantity}">1</td>
                            <td th:text="${#numbers.formatDecimal(item.unitPrice, 0, 'COMMA', 0, 'POINT')} + ' ƒë'">100.000 ƒë</td>
                            <td th:text="${#numbers.formatDecimal(item.totalPrice, 0, 'COMMA', 0, 'POINT')} + ' ƒë'">100.000 ƒë</td>
                        </tr>
                    </tbody>
                </table>
                <div class="text-end fw-bold">
                    T·ªïng c·ªông:
                    <span th:text="${#numbers.formatDecimal(invoice.items.stream().mapToDouble(i -> i.totalPrice).sum(), 0, 'COMMA', 0, 'POINT')} + ' ƒë'">0 ƒë</span>
                </div>
            </div>
            <div class="card-footer">
                <strong>Tr·∫°ng th√°i: </strong><span class="text-success" th:text="${invoice.status}">CONFIRMED</span>
            </div>
        </div>
    </div>

    <div th:if="${invoices == null || invoices.isEmpty()}" class="alert alert-info">
        B·∫°n ch∆∞a c√≥ ƒë∆°n h√†ng n√†o.
    </div>
</div>
</body>
</html>
